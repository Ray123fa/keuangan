<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteRule (^|/)\. - [F,L]
    RewriteRule ^vendor/ - [F,L]
    RewriteRule ^storage/ - [F,L]

    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    RewriteRule ^ public/index.php [L,QSA]
</IfModule>

<FilesMatch "^(config\.php|database\.php|schema\.sql|composer\.(json|lock)|README\.md|error\.log)$">
    <IfModule mod_authz_core.c>
        Require all denied
    </IfModule>
    <IfModule !mod_authz_core.c>
        Order Allow,Deny
        Deny from all
    </IfModule>
</FilesMatch>
